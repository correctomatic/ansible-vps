# Assumes that docker is already installed
---
- include_tasks: setup_nginx.yml

# Docker registry users are managed by nginx
- include_tasks: manage_registry_users.yml

# Certificates are configured in a different way if we
# are running the playbook in dev mode: it will use certbot for production
# and a self-signed certificate for development
- include_tasks: setup_certificates.yml
  when: not development_mode
  
- include_tasks: self_signed_certificates.yml
  when: development_mode
